{
    "contents" : "#villageMapGenerator.R\n#160823\n#Kiki Chang(ychang64@jhu.edu)\n#This function creates a chorepleth map of Taiwan at village level(???2015.10行政???製???) \n#using functions and variables in map.R villageMapVars.R.\n#????????????設???資?????????,???為?????????島??????鎮市???，以??????為??????\n#Data are loaded from a csv/xlxs file. The format is demonstrated in the example below.\n#\n#         col1      col2         \n# row 1   ?????????    得票???     #must have column names (can be anything)\n# row 2   中正???    0.3\n#   ...\n# row n   幸??????    0.7\n#\n#中山???綠??????票???.xlsx, 中山????????????票???.xlsx, 中山????????????票???差.xlsx are provided as samples for creating village maps (src:?????????/???維策略)\n#註???: Data must be stored in the first sheet and there should be no more than one sheet.\n#註???:桃???縣市、??????縣市、台???縣市、台中縣市???併???桃??????、?????????、台??????、台中???; ??????縣??????為?????????\n#e.g.\n# filePath <- file.choose()\n# villageMapGenerator(filePath, \"?????????\", \"中山???\", \"4 3\", 7, 0.2, 0.1, FALSE)\n#----------------------------------------------------------------------------#\n#setwd(\"~\\Documents\\Dropbox\\Kiki-project\") #change file path to current working directory\n\ndir <- dirname(parent.frame(2)$ofile)\nsetwd(dir)\nsource('map.R')\n#source('villageMapVars.R')\nload(\"villageMapVars.RData\", .GlobalEnv)\n\n#system.file(\"ui\", \"demo.ui\", package=\"RGtk2\")\n\n\n# > print(getwd())\n# > source_pathname  = get(\"ofile\",envir = parent.frame())\n# > source_dirname = dirname(source_pathname )\n# > setwd(source_dirname)\n# > print(getwd())\n# >\n\n#(WD <- getwd())\n#if (!is.null(WD)) setwd(WD)\n\n#villageMapVarsFP <- paste(WD,/\"villageMapVars.RData\" )\n\n\n#getwd()\n\n\n#filePath is the full path name of the data file\n#cityName, districtName, are strings (e.g. \"?????????\", \"中山???\") 輸入???????????????確認大小寫??????\n#color (integer 1-6 in string form) is a string of length 1 or 2  (e.g. \"5\", \"3 6\") \n#number of intervals (nI) is an integer between 1-8; width(w) is a positive number (>0); starting value (origin) is a number (default = 0)\nvillageMapGenerator <- function(filePath, cityName, districtName, color,nI, w, origin = 0, showVlgName = TRUE) {\n  args <- c(\"filePath\", \"cityName\", \"districtName\", \"color\", \"nI\", \"w\")\n  for (i in 1:length(args)) {\n    x=as.name(args[i])\n    print(ifelse(missing(x), stop(paste(args[i], \"not specified.\")), paste(args[i], \"is specified.\") ))\n  }\n  \n  myMap <<- subset(myMap, C_Name == cityName & T_Name == districtName) #update myMap (global var)\n  cNum <- as.numeric(strsplit(color, split = \" \")[[1]])  #color number(s)\n  \n  #choose data from file\n  chooseFile(filePath)\n  \n  #store data\n  storeVillageData() \n  \n  #set range and label (setLabel default argument: numDigit = 4, isPercent = TRUE)\n  ifelse((length(cNum) == 1), setSgColRange(nI, w, origin), setDbColRange(nI, w, origin))\n  setLabel(cNum, nI, w, origin)\n  \n  #graph (default arguments: legendName = \"得票???\", isVillage = FALSE, textSize = 3, ext = \".svg\", showName = TRUE)\n  if(showVlgName) {\n    graphArea(cNum, nI, isVillage = TRUE)\n  } else {\n    graphArea(cNum, nI, isVillage = TRUE, showName = FALSE)\n  }\n}\n",
    "created" : 1472583356952.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3664548853",
    "id" : "DE161D75",
    "lastKnownWriteTime" : 1472585076,
    "path" : "~/Dropbox/Kiki-project/villageMapGenerator.R",
    "project_path" : "villageMapGenerator.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}